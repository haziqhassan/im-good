{"version":3,"sources":["../../src/pages/page2/page2.module.ts","../../src/pages/page2/page2.ts"],"names":[],"mappings":"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","file":"8.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { Page2Page } from './page2';\n\n@NgModule({\n  declarations: [\n    Page2Page,\n  ],\n  imports: [\n    IonicPageModule.forChild(Page2Page),\n  ],\n})\nexport class Page2PageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/page2/page2.module.ts","import { Component, ViewChild } from '@angular/core';\nimport { Platform, Content, IonicPage, LoadingController, ToastController } from 'ionic-angular';\n//import { ApiAiClient } from 'api-ai-javascript';\nimport { Message } from 'models/message';\nimport { FormControl, FormBuilder } from '@angular/forms';\nimport { AuthServiceProvider } from '../../providers/auth-service/auth-service';\n\n\n@IonicPage()\n@Component({\n  selector: 'page-page2',\n  templateUrl: 'page2.html',\n})\nexport class Page2Page {\n\n  @ViewChild(Content) content: Content;\n  accessToken: string = '4cbf55627a664ccdb21171d56789213c';\n  client;\n  messages: Message[] = [];\n  messageForm: any;\n  chatBox: any;\n  isLoading: boolean;\n\n  userDetails : any;\n  responseData : any;\n  dataSet : any;\n  userPostData = {\"user_id\": \"\",\"token\": \"\"};\n\n  agentDetails : any;\n  responseAgent : any;\n  agentPostData = [];\n\n  constructor(public platform: Platform, public formBuilder: FormBuilder, public authService: AuthServiceProvider, public loadingCtrl: LoadingController, public toastCtrl  : ToastController) {\n    const data = JSON.parse(localStorage.getItem('userData'));\n    this.userDetails = data.userData;\n    this.userPostData.user_id = this.userDetails.user_id;\n    this.userPostData.token = this.userDetails.token;\n    this.getAgent();\n\n    this.chatBox = '';\n\n    this.messageForm = formBuilder.group({\n      message: new FormControl('')\n    });\n\n    /*this.client = new ApiAiClient({\n      accessToken: this.accessToken\n    });*/\n  }\n\n  getAgent() {\n    let loader = this.loadingCtrl.create({\n      cssClass: \"transparent\",\n      content: `\n        <img src=\"assets/imgs/moon.png\" class=\"ghost\" width=\"80px\"/>\n        <p class=\"fonts\">Please wait..</p>`,\n      spinner: 'hide',\n    });\n\n    loader.present();\n\n    this.authService.postData(this.userPostData, 'chatbot')\n      .then((result) => {\n        this.responseData = result;\n        if (this.responseData.feedData) {\n          localStorage.setItem('chatbot', JSON.stringify(this.responseData));\n          this.dataSet = this.responseData.feedData;\n          console.log(this.dataSet);\n          this.allAgent();\n          //this.httpdata = this.dataSet;\n          loader.dismiss();\n        } else {\n          this.sendNotification(`Something wrong, check your internet connection`);\n          loader.dismiss();\n        }\n      }, (err) => {\n          loader.dismiss();\n      });\n  }\n\n  sendMessage(req: string) {\n    if (!req || req === '') {\n      return;\n    }\n    else{\n      this.messages.push({ from: 'You', text: req });\n      this.isLoading = true;\n      console.log(req);\n      var splitted = req.split(\" \");\n      console.log(splitted)\n\n      for (var i = 0; i < splitted.length; i++) {\n        //splitted[i] += \" \";\n        if(splitted[i] == \"problem\"){\n          this.messages.push({ from: 'Mr. Moon', text: \"Please share if you dont mind, I won't judge you\" });\n          this.scrollToBottom();\n          this.isLoading = false;\n        }\n        else if(splitted[i] == \"hi\"){\n          this.messages.push({ from: 'Mr. Moon', text: \"Hi there! I am Mr.Moon, how are you feeling today?\" });\n          this.scrollToBottom();\n          this.isLoading = false;\n        }\n        else if(splitted[i] == \"great\"){\n          this.messages.push({ from: 'Mr. Moon', text: \"Nice! glad to hear that.\" });\n          this.messages.push({ from: 'Mr. Moon', text: \"If you need someone to listen to your problem, just find me here.\" });\n          this.scrollToBottom();\n          this.isLoading = false;\n        }\n        else if(splitted[i] == \"bad\"){\n          this.messages.push({ from: 'Mr. Moon', text: \"Why dear? anything happen?\" });\n          this.scrollToBottom();\n          this.isLoading = false;\n        }\n        else if(splitted[i] == \"hmm\"){\n          this.messages.push({ from: 'Mr. Moon', text: \"Looks like you're not okay. Mind to share anything dear?\" });\n          this.scrollToBottom();\n          this.isLoading = false;\n        }\n        else if(splitted[i] == \"done\"){\n          this.messages.push({ from: 'Mr. Moon', text: \"Hmm i see. Look Bad things can happen, and often do. But they only take up a few pages of your story, and anyone can survive a few pages.\" });\n          this.messages.push({ from: 'Mr. Moon', text: \"You will feel better after this, just stay strong alright :)\" });\n          this.messages.push({ from: 'Mr. Moon', text: \"How are you feeling now?\" });\n          this.scrollToBottom();\n          this.isLoading = false;\n        }\n        else if(splitted[i] == \"better\"){\n          this.messages.push({ from: 'Mr. Moon', text: \"Nice! glad to hear that.\" });\n          this.messages.push({ from: 'Mr. Moon', text: \"If you need someone to listen to your problem, just find me here.\" });\n          this.scrollToBottom();\n          this.isLoading = false;\n        }\n        else if(splitted[i] == \"worse\"){\n          this.messages.push({ from: 'Mr. Moon', text: \"If you still feel bad, feel free to apply meeting in this app. Your meeting will be handle by counsellor. All counsellor listed in this app are come from Counselling Centre, UPSI\" });\n          this.messages.push({ from: 'Mr. Moon', text: \"They are professional, they will able to help you :). And don't worry, they good at keeping secrets ;)\" });\n          this.scrollToBottom();\n          this.isLoading = false;\n        }\n        else if(splitted[i] == \"later\"){\n          this.messages.push({ from: 'Mr. Moon', text: \"Alright no worries. See ya :)\" });\n          this.scrollToBottom();\n          this.isLoading = false;\n        }\n        else if(splitted[i] == \"alright\"){\n          this.messages.push({ from: 'Mr. Moon', text: \"Great. Anything just find me here.\" });\n          this.messages.push({ from: 'Mr. Moon', text: \";)\" });\n          this.scrollToBottom();\n          this.isLoading = false;\n        }\n\n      }\n\n\n    }\n\n    /*this.client\n      .textRequest(req)\n      .then(response => {\n\n        console.log('res');\n        console.log(response);\n        this.messages.push({\n          from: 'Mr. Moon',\n          text: response.result.fulfillment.speech\n        });\n        this.scrollToBottom();\n        this.isLoading = false;\n      })\n      .catch(error => {\n\n        console.log('error');\n        console.log(error);\n      })*/;\n\n    this.chatBox = '';\n  }\n\n  allAgent(){\n    const data = JSON.parse(localStorage.getItem('chatbot'));\n    //this.userDetails = data.userData;\n    //this.userPostData.user_id = this.userDetails.user_id;\n    //this.userPostData.token = this.userDetails.token;\n  }\n\n  scrollToBottom() {\n    setTimeout(() => {\n      this.content.scrollToBottom();\n    }, 100);\n  }\n\n  sendNotification(message)  : void\n  {\n     let notification = this.toastCtrl.create({\n         message       : message,\n         duration      : 3000,\n         cssClass      : \"toast-container\",\n         position      : \"bottom\"\n     });\n     notification.present();\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/page2/page2.ts"],"sourceRoot":""}